<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<BorderPane xmlns="http://javafx.com/javafx/21" 
            xmlns:fx="http://javafx.com/fxml/1" 
            fx:controller="com.example.budgetpro.pages.Historique"
            prefHeight="600.0" prefWidth="800.0"
            styleClass="page-root">

    <!-- EN-TÊTE -->
    <top>
        <VBox>
            <!-- Header violet — titre uniquement -->
            <HBox alignment="CENTER_LEFT" styleClass="page-header">
                <Label text="Historique des Transactions" styleClass="page-header-title"/>
            </HBox>

            <!-- Barre de filtres — séparée, fond neutre -->
            <HBox spacing="15" alignment="CENTER_LEFT" styleClass="filter-bar">
                <Label text="Filtre :" styleClass="filter-label"/>
                <ComboBox fx:id="categorieComboBox"
                          promptText="All"
                          onAction="#handleFilterCategorie"
                          prefWidth="160"
                          styleClass="combo-box"/>

                <Label text="Début :" styleClass="filter-label"/>
                <DatePicker fx:id="dateDebutPicker" prefWidth="150" styleClass="input-field"/>

                <Label text="Fin" styleClass="filter-label"/>
                <DatePicker fx:id="dateFinPicker" prefWidth="150" styleClass="input-field"/>

                <Button text="Filtrer" onAction="#handleFilterByDate" styleClass="btn-success"/>
                <Button text="Réinitialiser" onAction="#handleResetFilters" styleClass="btn-secondary"/>
            </HBox>
        </VBox>
    </top>

    <!-- TABLEAU DES TRANSACTIONS -->
    <center>
        <VBox styleClass="content-area">
            <TableView fx:id="transactionsTable" 
                       VBox.vgrow="ALWAYS"
                       styleClass="table-view">
                
                <columns>
                    <TableColumn fx:id="titreColumn" text="Titre" prefWidth="200" />
                    <TableColumn fx:id="categorieColumn" text="Catégorie" prefWidth="150" />
                    <TableColumn fx:id="prixColumn" text="Prix" prefWidth="150" />
                    <TableColumn fx:id="dateColumn" text="Date" prefWidth="150" />
                    <TableColumn fx:id="descriptionColumn" text="Description" prefWidth="250" />
                </columns>

                <placeholder>
                    <Label text="Aucune transaction trouvée" styleClass="subtitle"/>
                </placeholder>
            </TableView>
        </VBox>
    </center>

    <!-- PIED DE PAGE -->
    <bottom>
        <HBox alignment="CENTER_RIGHT" spacing="20" styleClass="footer-bar">
            <Label fx:id="totalLabel" text="Total : 0 XOF" styleClass="total-label"/>
        </HBox>
    </bottom>

</BorderPane>